---
/**
 * * Services & Pricing cards
 */

import Button from "@components/Button/Button.astro";
import { Icon } from "astro-icon/components";
import { getCollection } from "astro:content";

interface Props {
	heading?: string;
	ctaText?: string;
}

const {
	heading = "Services & Pricing",
	ctaText = "Get in touch",
} = Astro.props;

const services = await getCollection("services", ({ data }) => {
	return data.draft !== true;
});

const sortedServices = services.sort((a, b) => a.data.order - b.data.order);
---

<section id="pricing" class="mx-auto max-w-6xl scroll-mt-10 px-4 py-8 md:py-12">
	<div class="mx-auto max-w-6xl text-center">
		<h2 class="h2 text-pretty uppercase">{heading}</h2>
	</div>

	<div class="mt-8 grid gap-6 sm:grid-cols-2 md:mt-12 md:gap-8">
		{
			sortedServices.map((service) => (
				<div class="bg-base-100 rounded-md p-6 md:p-8">
					<div class="flex items-center gap-3">
						<Icon name={service.data.icon} class="text-primary-500 size-7 shrink-0" />
						<h3 class="h3 uppercase">{service.data.name}</h3>
					</div>
					<p class="font-decorative text-primary-500 mt-3 text-3xl leading-none md:text-4xl">
						{service.data.price}
					</p>
					<ul class="mt-4 flex flex-col gap-2">
						{service.data.features.map((feature) => (
							<li class="description leading-snug md:text-lg md:leading-snug">{feature}</li>
						))}
					</ul>
				</div>
			))
		}
	</div>

	<div class="mt-12 flex justify-center">
		<Button href="/#contact" variant="outline" class="px-8">{ctaText}</Button>
	</div>
</section>
